<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>XeinStore - Digital Game Codes</title>
    <style>
        * { box-sizing: border-box; margin:0; padding:0; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: linear-gradient(135deg,#667eea 0%,#764ba2 100%); min-height:100vh; color:#222; }
        .header { background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); padding:1rem 0; box-shadow:0 2px 20px rgba(0,0,0,0.1); position:sticky; top:0; z-index:100; }
        .nav { max-width:1200px; margin:0 auto; display:flex; justify-content:space-between; align-items:center; padding:0 2rem; }
        .logo { font-size:1.6rem; font-weight:700; background:linear-gradient(45deg,#667eea,#764ba2); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
        .cart-btn { background:#667eea; color:#fff; border:none; padding:.6rem 1rem; border-radius:20px; cursor:pointer; font-weight:600; display:flex; gap:.5rem; align-items:center;}
        .cart-count { background:#ff4757; color:white; border-radius:50%; padding:.15rem .45rem; font-size:.8rem; }
        .container { max-width:1200px; margin:1.5rem auto; padding:1rem; }
        .hero { text-align:center; color:white; margin-bottom:1.5rem; }
        .hero h1 { font-size:2.4rem; text-shadow:2px 2px 4px rgba(0,0,0,0.25); margin-bottom:.3rem; }
        .hero .note-box { background: rgba(255,255,255,0.9); padding:1rem; border-radius:12px; color:#333; font-weight:600; margin-top:1rem; display:inline-block; }
        .products-grid { display:grid; grid-template-columns: repeat(auto-fill,minmax(280px,1fr)); gap:1.25rem; }
        .product-card { background: rgba(255,255,255,0.95); border-radius:12px; overflow:hidden; box-shadow:0 8px 25px rgba(0,0,0,0.08); transition:transform .18s; }
        .product-card:hover { transform: translateY(-6px); }
        .product-image { height:150px; display:flex; align-items:center; justify-content:center; font-size:3rem; color:white; background: linear-gradient(45deg,#667eea,#764ba2); }
        .product-info { padding:1rem; }
        .product-title { font-weight:700; color:#2d3748; margin-bottom:.35rem; }
        .product-platform { color:#667eea; margin-bottom:.6rem; }
        .duration-selector select { width:100%; padding:.45rem; border-radius:6px; border:1px solid #e6eef8; margin-bottom:.5rem; }
        .duration-price { color:#667eea; font-weight:700; margin-bottom:.6rem; }
        .add-to-cart { width:100%; padding:.6rem; border-radius:8px; background:#667eea; color:white; border:none; cursor:pointer; font-weight:700; }
        /* cart page */
        .cart-page { display:none; max-width:800px; margin:2rem auto; background:white; border-radius:12px; padding:1rem; box-shadow:0 8px 25px rgba(0,0,0,0.08); }
        .cart-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem; }
        .cart-header h3 { font-size:1.5rem; }
        .cart-item { display:flex; justify-content:space-between; align-items:center; margin-bottom:.75rem; border-bottom:1px solid #eee; padding-bottom:.5rem; }
        .cart-quantity { display:flex; align-items:center; gap:.5rem; }
        .cart-quantity button { padding:.3rem .6rem; border:none; background:#667eea; color:white; border-radius:6px; cursor:pointer; font-weight:700; }
        .checkout-btn { padding:.75rem 1rem; border:none; border-radius:10px; background:#00d4aa; color:white; font-weight:700; cursor:pointer; margin-top:1rem; width:100%; font-size:1rem; }
        /* checkout page */
        .checkout-page { display:none; max-width:800px; margin:2rem auto; background:white; border-radius:12px; padding:1.5rem; box-shadow:0 8px 25px rgba(0,0,0,0.08); }
        .checkout-page h2 { margin-bottom:1rem; }
        .wallet-section { background:#f4f7fb; padding:1rem; border-radius:8px; margin-bottom:1rem; display:flex; justify-content:space-between; align-items:center; }
        .copy-btn { background:#667eea; color:white; border:none; padding:.5rem 1rem; border-radius:6px; cursor:pointer; }
        .back-btn { background:#999; color:white; border:none; padding:.5rem 1rem; border-radius:6px; cursor:pointer; margin-bottom:1rem; }
        /* recent purchase notification */
        .recent-purchase { position: fixed; bottom:10px; left:10px; background: rgba(0,0,0,0.7); color:white; padding:.6rem 1rem; border-radius:12px; font-size:.85rem; opacity:0; transition: opacity .5s; z-index:9999; }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="logo">ðŸŽ® XeinStore</div>
            <button class="cart-btn" onclick="openCart()">Cart <span class="cart-count" id="cart-count">0</span></button>
        </nav>
    </header>

    <main class="container">
        <div class="hero">
            <h1>Digital Game Codes</h1>
            <div class="note-box">
                NOTE: Please be reminded to screenshot your crypto payment before proceeding.
            </div>
        </div>

        <div class="products-grid" id="products-grid"></div>
    </main>

    <!-- Cart Page -->
    <div class="cart-page" id="cart-page">
        <div class="cart-header">
            <h3>Your Cart</h3>
            <button class="back-btn" onclick="closeCart()">Back</button>
        </div>
        <div id="cart-items"></div>
        <button class="checkout-btn" onclick="goToCheckout()">Proceed to Checkout</button>
    </div>

    <!-- Checkout Page -->
    <div class="checkout-page" id="checkout-page">
        <button class="back-btn" onclick="backToCart()">Back to Cart</button>
        <h2>Checkout</h2>
        <div id="checkout-items"></div>
        <div class="wallet-section">
            <div>Wallet Address: <span id="wallet-address">TEwKbkNdXqvNUG951nYTCRF6UjLGBn7pqc</span></div>
            <button class="copy-btn" onclick="copyWallet()">Copy</button>
        </div>
        <div class="note-box" style="margin-top:1rem;">
            NOTE: Please send BOTH screenshots of your crypto payment and your receipt to <a href="https://t.me/cocomelonqueen" target="_blank">@cocomelonqueen</a>
        </div>
        <button class="checkout-btn" onclick="showReceiptPage()">I Paid</button>
    </div>

    <div class="recent-purchase" id="recent-purchase"></div>

    <script>
        // ---------- PRODUCTS ----------
        const products = [
            { id:1, title:"Xein Pubg Key", platform:"Digital Key", pricing:{"1_day":5,"3_days":8,"7_days":12,"30_days":23}, icon:"ðŸŽ¯" },
            { id:2, title:"Xein Delta Force Key", platform:"Digital Key", pricing:{"1_day":4,"3_days":7,"7_days":11,"30_days":22}, icon:"âš¡" }
        ];

        let cart = [];

        function renderProducts() {
            const grid = document.getElementById('products-grid');
            grid.innerHTML = '';
            products.forEach(product => {
                const card = document.createElement('div');
                card.className='product-card';
                let optionsHTML = '';
                for (const [key,value] of Object.entries(product.pricing)){
                    const label = key.replace(/_/g,' ').replace(/\b\w/g,l=>l.toUpperCase());
                    optionsHTML += `<option value="${key}">${label} - $${value}</option>`;
                }
                card.innerHTML = `
                    <div class="product-image">${product.icon}</div>
                    <div class="product-info">
                        <div class="product-title">${product.title}</div>
                        <div class="product-platform">${product.platform}</div>
                        <div class="duration-selector">
                            <select id="duration-${product.id}" onchange="updatePrice(${product.id})">
                                ${optionsHTML}
                            </select>
                            <div class="duration-price" id="price-${product.id}">$${product.pricing["1_day"]} USDT</div>
                        </div>
                        <button class="add-to-cart" onclick="addToCart(${product.id})">Add to Cart</button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function updatePrice(productId){
            const select = document.getElementById(`duration-${productId}`);
            const priceDisplay = document.getElementById(`price-${productId}`);
            const product = products.find(p=>p.id===productId);
            priceDisplay.textContent = `$${product.pricing[select.value]} USDT`;
        }

        function addToCart(productId){
            const product = products.find(p=>p.id===productId);
            const select = document.getElementById(`duration-${productId}`);
            const selectedDuration = select.value;
            const price = product.pricing[selectedDuration];

            const existing = cart.find(i=>i.id===productId && i.selectedDuration===selectedDuration);
            if(existing) existing.quantity++;
            else cart.push({id:product.id,title:product.title,selectedDuration,durationLabel:select.options[select.selectedIndex].text,price,quantity:1});
            updateCartUI();
            showRecentPurchase();
        }

        function updateCartUI(){
            const cartCount = document.getElementById('cart-count');
            cartCount.textContent = cart.reduce((s,i)=>s+i.quantity,0);
        }

        function openCart(){
            document.getElementById('cart-page').style.display='block';
            renderCartItems();
        }

        function closeCart(){
            document.getElementById('cart-page').style.display='none';
        }

        function renderCartItems(){
            const container = document.getElementById('cart-items');
            container.innerHTML='';
            cart.forEach(item=>{
                const div = document.createElement('div');
                div.className='cart-item';
                div.innerHTML=`
                    <div>
                        <div style="font-weight:700">${item.title}</div>
                        <div style="font-size:.85rem">${item.durationLabel} - $${item.price}</div>
                    </div>
                    <div class="cart-quantity">
                        <button onclick="decreaseQty(${item.id},'${item.selectedDuration}')">âˆ’</button>
                        <span>${item.quantity}</span>
                        <button onclick="increaseQty(${item.id},'${item.selectedDuration}')">+</button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function decreaseQty(id,dur){
            const idx = cart.findIndex(i=>i.id===id && i.selectedDuration===dur);
            if(idx>-1){
                cart[idx].quantity=Math.max(1,cart[idx].quantity-1);
                renderCartItems();
                updateCartUI();
            }
        }

        function increaseQty(id,dur){
            const idx = cart.findIndex(i=>i.id===id && i.selectedDuration===dur);
            if(idx>-1){ cart[idx].quantity++; renderCartItems(); updateCartUI(); }
        }

        function goToCheckout(){
            document.getElementById('cart-page').style.display='none';
            const checkoutPage = document.getElementById('checkout-page');
            checkoutPage.style.display='block';
            renderCheckoutItems();
        }

        function backToCart(){
            document.getElementById('checkout-page').style.display='none';
            document.getElementById('cart-page').style.display='block';
        }

        function renderCheckoutItems(){
            const container = document.getElementById('checkout-items');
            container.innerHTML='';
            cart.forEach(item=>{
                const div = document.createElement('div');
                div.style.marginBottom='0.5rem';
                div.innerHTML=`${item.title} (${item.durationLabel}) x${item.quantity} - $${item.price*item.quantity}`;
                container.appendChild(div);
            });
        }

        function copyWallet(){
            const wallet = document.getElementById('wallet-address').textContent;
            navigator.clipboard.writeText(wallet).then(()=>alert('Wallet address copied âœ…'));
        }

        function showReceiptPage(){
            alert('You have marked as paid. A receipt will be shown in the next step.');
            // Logic to show receipt page goes in Part 2
        }

        // Recent purchase notification
        const randomUsernames = ['gamer123','xXPlayerXx','funnycat99','proKiller','legendaryOne','shadowNinja','rocketGirl','dragonMaster','pixelHero','stealthyFox'];
        function showRecentPurchase(){
            const el = document.getElementById('recent-purchase');
            const randomUser = randomUsernames[Math.floor(Math.random()*randomUsernames.length)];
            const randomProduct = products[Math.floor(Math.random()*products.length)].title;
            const randomMinutes = Math.floor(Math.random()*59)+1;
            el.textContent=`${randomUser} bought ${randomProduct} ${randomMinutes} minutes ago`;
            el.style.opacity=1;
            setTimeout(()=>{el.style.opacity=0;},5000);
        }

        renderProducts();
    </script>
</body>
</html>
<!-- Receipt Page -->
<div class="checkout-page" id="receipt-page" style="display:none;">
    <h2>Payment Receipt</h2>
    <div id="receipt-content" style="margin-bottom:1rem;"></div>
    <div class="note-box">
        NOTE: Please send BOTH screenshots of your crypto payment and your receipt to 
        <a href="https://t.me/cocomelonqueen" target="_blank">@cocomelonqueen</a>
    </div>
    <button class="back-btn" onclick="backToCheckout()">Back to Checkout</button>
</div>

<script>
    function showReceiptPage() {
        // Hide checkout
        document.getElementById('checkout-page').style.display='none';
        const receiptPage = document.getElementById('receipt-page');
        receiptPage.style.display='block';

        // Generate unique order ID
        const orderId = 'ORD-' + Math.floor(Math.random()*900000 + 100000);

        const container = document.getElementById('receipt-content');
        container.innerHTML='';

        let totalAmount = 0;
        cart.forEach(item=>{
            const itemTotal = item.price * item.quantity;
            totalAmount += itemTotal;
            const div = document.createElement('div');
            div.textContent = `${item.title} (${item.durationLabel}) x${item.quantity} - $${itemTotal}`;
            container.appendChild(div);
        });

        const orderIdDiv = document.createElement('div');
        orderIdDiv.style.marginTop='0.8rem';
        orderIdDiv.style.fontWeight='700';
        orderIdDiv.textContent = `Order ID: ${orderId}`;
        container.appendChild(orderIdDiv);

        const totalDiv = document.createElement('div');
        totalDiv.style.marginTop='0.5rem';
        totalDiv.style.fontWeight='700';
        totalDiv.textContent = `Total Paid: $${totalAmount} USDT`;
        container.appendChild(totalDiv);
    }

    function backToCheckout(){
        document.getElementById('receipt-page').style.display='none';
        document.getElementById('checkout-page').style.display='block';
    }
</script>
